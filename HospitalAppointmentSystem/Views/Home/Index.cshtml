@using HospitalAppointmentSystem.Services.Interfaces
@using HospitalAppointmentSystem.Infrastructure.Extensions
@inject IDoctorService doctorService
@{
    ViewData["Title"] = "Начало";
}

<div class="container py-5">
    <h1 class="display-5 text-center mb-5">
        Онлайн система за справки и обслужване на болница.
    </h1>

    <p class="lead text-center mb-5 fs-4">
        Нашата система ви позволява бързо и лесно да запазите час при доктор, да видите графика си, да оцените прегледа и да управлявате медицинските си посещения — всичко това онлайн.
    </p>

    @if (this.User?.Identity?.IsAuthenticated ?? false)
    {
        @if (this.User?.IsInRole("Patient") ?? false)
        {
            <div class="row row-cols-1 row-cols-md-2 g-4 justify-content-center">
                <div class="col d-flex">
                    <div class="card shadow-sm flex-fill">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Доктори</h5>
                            <p class="card-text flex-grow-1">
                                Прегледайте всички налични лекари, вижте техните оценки и запазете час удобно онлайн.
                            </p>
                            <a asp-controller="Doctor" asp-action="Index" class="btn btn-primary mt-auto">Запиши час</a>
                        </div>
                    </div>
                </div>

                <div class="col d-flex">
                    <div class="card shadow-sm flex-fill">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Моите часове</h5>
                            <p class="card-text flex-grow-1">
                                Вижте вашите предстоящи прегледи, минали посещения и оценки, които сте дали на лекари.
                            </p>
                            <a asp-controller="Appointment" asp-action="MyAppointments" class="btn btn-outline-primary mt-auto">Прегледай</a>
                        </div>
                    </div>
                </div>
            </div>
        }

        @if (await doctorService.IsUserDoctorAsync(this.User.GetUserId()))
        {
            <div class="row row-cols-1 row-cols-md-2 g-4 justify-content-center">
                <div class="col d-flex">
                    <div class="card shadow-sm flex-fill">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">График за деня</h5>
                            <p class="card-text flex-grow-1">
                                Вижте предстоящите ви прегледи за избрания ден. Навигирайте лесно между датите.
                            </p>
                            <a asp-controller="Doctor" asp-action="Schedule" class="btn btn-primary mt-auto">Виж графика</a>
                        </div>
                    </div>
                </div>

                <div class="col d-flex">
                    <div class="card shadow-sm flex-fill">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Отпуск</h5>
                            <p class="card-text flex-grow-1">
                                Преглед, добавяне и отмяна на отпуски.
                            </p>
                            <a asp-controller="Doctor" asp-action="MyVacations" class="btn btn-outline-primary mt-auto">Преглед</a>
                        </div>
                    </div>
                </div>
            </div>

        }
    }
</div>


